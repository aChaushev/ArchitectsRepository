<!DOCTYPE html>
<html lang="en"
      xmlns:th='http://www.thymeleaf.org'
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/head}">
</head>

<body>

<div>
    <nav th:replace="~{fragments/navbar::navbar(activeLink=${'all-events'})}"></nav>
</div>

<main>
    <div class="container mt-5">
        <p class="mySticky text-center text-white"
           sec:authorize="isAuthenticated()"
           th:text="'Welcome, ' + ${#authentication.name}"
        >Welcome {userName}</p>

        <div class="row mt-5 mt-1 mb-2">
            <div class="col-12 mt-1 mb-1">

                <!-- My Events section-->
                <div>
                    <div class="home-fields"
                         style="height: 50vh; overflow: auto">
                        <h3 class="my-events">My Events</h3>
                        <table class="table">
                            <tr class="my-events">
                                <td scope="row" style="width: 5%">Image
                                </td>
                                <td>Name</td>
                                <td>Organizer</td>
                                <td>Date</td>
                                <td>Remove</td>
                            </tr>
                        </table>
                        <table class="table table-striped table-dark">
                            <tr class="my-events"
                                th:each="myEvent :${currentUserEvents}"
                            >
                                <td scope="row" style="width: 5%">
                                    <img class="mr-2 " src="" alt="" width="35px" height="35px"
                                         th:src="${myEvent.imageUrl}" th:alt="${myEvent.name}"
                                    >
                                </td>
                                <td th:text="${myEvent.name}"
                                >{eventName}</td>
                                <td th:text="${myEvent.user.username}"
                                >{organizer}</td>
                                <td th:text="${myEvent.date}"
                                >{date}</td>
                                <td style="width: 15%">
                                    <a class="btn-info btn"
                                       th:href="@{/event/{id} (id = *{myEvent.id})}"
                                    >Details</a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!-- All Events section-->
                <div>
                    <div class="home-fields" style="height: 80vh; overflow: auto">
                        <h3 class="my-events">All Events</h3>
                        <ul class="list-group list-group-vertical text-dark"
                            th:each="event :${allEvents}">
                            <li>
                                <div class="my-events-first-row">
                                    <div class="img1">
                                        <img id="image" src="" alt="" width="75px" height="75" style="padding-top: 0.3em; padding-left: 0.3em; margin-top: 2.3em"
                                             th:src="${event.imageUrl}" th:alt="${event.name}">
                                    </div>
                                    <p id="names"
                                       th:text="${event.name}"
                                    >{eventName}</p>
                                    <p id="authors"
                                       th:text="'by ' + ${event.user.username}"
                                    >by {organizer}</p>
                                    <div class="buttons-info">
                                    </div>
                                </div>

                                <div class="card-body">
                                    <form th:method="delete" th:action="@{/event/remove/{id}(id=${event.id})}"
                                          th:if="${event.user.id == #authentication.principal.id}">
                                        <input class="btn card-link" type="submit" value="Delete"/>
                                    </form>
                                </div>

                                <div class="second-info">
                                    <p th:text="'Date: ' + ${event.date}"
                                    >Date: {date}</p>
                                    <p th:text="'Added by ' + ${event.user.username}"
                                    >Added by {organizerUsername}</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>

    </div>
</main>
</body>
</html>
